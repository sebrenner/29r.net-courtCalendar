/*
	textSaver.js v0.1.1
	Copyright (c) 2011 David Hu (http://d.aweed.us)
	Licensed under the GNU General Public License v3 (http://www.gnu.org/licenses/gpl.html)
	
	For more information, see: http://d.aweed.us/textsaver
*/


(function($){var tv={nnc:0,n:0,tsn:[]};$.fn.textSaver=function(){return this.each(function(){var m=tv.n;tv.tsn[m]=[];if($(this).get(0).tagName=="FORM"){$(this).children("input, textarea").each(function(){ts($(this),m);});$(this).submit(function(){for(var k in tv.tsn[m]){localStorage.removeItem(tv.tsn[m][k]);}});}else{ts($(this),m);}
tv.n++;});}
function ts(o,m){var tn=gtn(o,m);if(localStorage.getItem(tn)!=null){o.val(localStorage.getItem(tn));}
o.bind('keyup',function(){localStorage.setItem(tn,o.val());});}
function gtn(o,m){var tn=o.parent().attr('id');if(tn===''){tn=window.location.host+window.location.pathname;}
if(o.attr('name')!==''){tn+='_'+o.attr('name');}else{tn+="_"+o.get(0).tagName;tn+=tv.nnc;tv.nnc++;}
tn+="_ts";tv.tsn[m].push(tn);return tn;}})(jQuery);