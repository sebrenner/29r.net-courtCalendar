<html>
<head>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <link href="dialogStyle.css" rel="stylesheet" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

 <style type="text/css" title="currentStyle">
      @import "table.css";
      th.ui-datepicker-week-end,
      td.ui-datepicker-week-end {
          display: none;
      }

      .contact { float: left; margin-right: 1em; }
      .contact p { margin-top: 0; }
</style>
    
    <script type="text/javascript" language="javascript" src="/DataTables/js/jquery.dataTables.min.js"></script>
  
    <script src="../jquery.Storage.js"></script>
    <script src="../date.js"></script> 
  
<script>
      function getUrlVars()
            {
                var vars = [], hash;
                var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
                for(var i = 0; i < hashes.length; i++)
                {
                    hash = hashes[i].split('=');
                    vars.push(hash[0]);
                    vars[hash[0]] = hash[1];
                }
                return vars;
            }
            
        
            
            // Get any paramaters from the url and build a url
            // inNumber removes the getURlVars results that are keyed
            // to a numberic index.  WTF.  This is a kludge.
            function isNumber(n) {
              return !isNaN(parseFloat(n)) && isFinite(n);
            }
            
            JSONdata = "/dataTableJSON.php?";
            myParams = getUrlVars();
            for(var index in myParams) {
                if  (isNumber(index)) {continue;}
                JSONdata = JSONdata + index + "=" + myParams[index] + "&";
            }


    $(document).ready(function(){
        // Set default values from local storage and calculate dates
        $('#contact').val($.Storage.get("contactLine"));
        $('#judge').val($.Storage.get("judge"));
        var nextMonday = Date.today().next().monday();
        $('#start').val(nextMonday.toString("M/d/yyyy"));
        var nextFriday = nextMonday.add(4).days();
        $('#last').val(nextFriday.toString("M/d/yyyy"));    
        
        // Store local data
        $('#contact').blur(function(){
            //alert('Handler for .blur() called.');
            $.Storage.set({"contactLine": $('#contact').val() });
        });
        $('#judge').blur(function(){
            //alert('Handler for .blur() called.');
            $.Storage.set({"judge": $('#judge').val() });
        });
        
        // Functions for dialog box
        $("#btnShowSimple").click(function (e)
            {
                ShowDialog(false);
                e.preventDefault();
            });

        $("#btnShowModal").click(function (e)
            {
                ShowDialog(true);
                e.preventDefault();
            });

        $("#btnClose").click(function (e)
            {
                HideDialog();
                e.preventDefault();
            });

        $("#btnSubmit").click(function (e)
            {
                var brand = $("#brands input:radio:checked").val();
                $("#output").html("<b>Your favorite mobile brand: </b>" + brand);
                HideDialog();
                e.preventDefault();
            });
        
        // create data table 
        var oTable = $('#example').dataTable( {
          "bProcessing": true,
          "sAjaxSource": "/dataTableJSON.php?judge=allen",
          "aoColumns": [
            { "mDataProp": "NAC" },
            { "mDataProp": "NAC_date"},
            { "mDataProp": "caption" },
            { "mDataProp": "judge" }
            ]
        } );
        
        
        
    });


    // Create date pickers with no weekends
    $(function() {
        $( "#start" ).datepicker({ beforeShowDay: $.datepicker.noWeekends });        
    });

    $(function() {
        $( "#last" ).datepicker({ beforeShowDay: $.datepicker.noWeekends });
    });
    
    // store form data
    $.Storage.set("name", "value") -
    $.Storage.get("name")
    
    
    // functions for showing / hiding dialog
    function ShowDialog(modal)
        {
            $("#overlay").show();
            $("#dialog").fadeIn(300);

            if (modal)
            {
                $("#overlay").unbind("click");
            }
            else
            {
                $("#overlay").click(function (e)
                {
                    HideDialog();
                });
            }
        }

        function HideDialog()
        {
            $("#overlay").hide();
            $("#dialog").fadeOut(300);
        } 
    
</script>


</head>
<body>
<basefont size="15">

<h2>Create Jacket Tags:</h2>
<p>
<form action="jacketTags.php" method="get" id="jacksetForm">
    Judge (last name)
    <input type="text" name="judge" id="judge"><br />
    From: <input type="text" name="start" id="start"> to: 
    <input type="text" name="last" id="last"><br />
    Contact line:
    <input type="text" id="contact" name="contact"><br />
    Case type: <input type="radio" name="casetype" value="0"> Civil <input type="radio" name="casetype" value="1" checked> Criminal <input type="radio" name="casetype" value="2"> Both   
    
    <input type="submit" value="Create">
    <input type="reset" value="Clear">
    <input type="button" id="btnShowModal" value="Select Cases" />
    
</form></p>
<hr>

<div id="overlay" class="web_dialog_overlay"></div>
    
    <div id="dialog" class="web_dialog">
    
                    <a href="#" id="btnClose">Close</a>
             my dialog
             
             
             <div id="dynamic">
             <table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
  <thead>
    <tr>
      <th width="15%">Action</th>
      <th width="8%">Date &amp; Time</th>
      <th width="25%">Caption</th>
      <th width="2%">Judge</th>
    </tr>
  </thead>
  <tbody>
    
  </tbody>
  <tfoot>
    <tr>
        <th>Action</th>
      <th>Date &amp; Time</th>
      <th>Caption</th>
      <th>Judge</th>
    </tr>
  </tfoot>
</table></div>
    </div>
</body>
</html>
